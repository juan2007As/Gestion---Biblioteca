<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <link rel="stylesheet" href="../static/estilos_menu_prestamos.css">
    <title>Biblioteca</title>
</head>
<body>
    <div class="Box">
        <img src="{{ url_for('static', filename='imagenes/LogoInicial.jpg') }}" alt="Logo" class="Box__img">
        <h1 class="Box__Title">Administración de Biblioteca</h1>
        <div class="Box_administracion">
            <h2 class="Administracion__title">Gestión de préstamos</h2>
            <a href="{{ url_for('index') }}" class="btn-menu-principal">Menú Principal</a>
        </div>
        <div class="Menu">
            <ul>
            <button id="Boton_Prestamo">Prestar Libro</button>
            <button id="Boton_Devolver">Devolver Libro</button>
            <li id="menu-item-ver"><a href="{{ url_for('listar_prestamos') }}">Ver Lista de Préstamos</a></li>
            </ul>
        </div>

    <div id="Box__contenedor_prestamo" style="display: none">
        <div id="Prestamo_Menu" class="Prestar_Menu">
            <h1 class="form__title">Prestamo de Libro</h1>
            <form action="{{ url_for('prestar_libro_web') }}" method="post" class="form__prin">
                <!-- Campo de búsqueda de usuario -->
                <div class="campo-busqueda">
                    <input type="text" id="busqueda_usuario" name="busqueda_usuario" 
                           placeholder="Buscar usuario por documento o nombre..." required>
                    <input type="hidden" id="documento_usuario" name="documento_usuario">
                    <div id="resultados_usuario" class="resultados-busqueda"></div>
                </div>
                
                <!-- Campo de búsqueda de libro -->
                <div class="campo-busqueda">
                    <input type="text" id="busqueda_libro" name="busqueda_libro" 
                           placeholder="Buscar libro por ID, título o género..." required>
                    <input type="hidden" id="id_libro" name="id_libro">
                    <div id="resultados_libro" class="resultados-busqueda"></div>
                </div>
                
                <input type="number" name="dias" placeholder="Días de préstamo..." required>
                <button class="Form_button" type="submit">Prestar</button>
                <a class="Link__form" href="{{ url_for('menu_prestamos') }}">Volver</a>
            </form>
        </div>
    </div>
    <div id="Box__contenedor_devolver" style="display: none">
        <div id="Devolver_Menu" class="Devolver_Menu flex-container">
            <!-- Área del título -->
            <div class="devolver-titulo">
                <h1 class="form__title">Devolver Libro</h1>
            </div>
            
            <!-- Área de contenido scrolleable -->
            <div class="devolver-contenido">
                <!-- Paso 1: Buscar usuario -->
                <div id="paso_buscar_usuario" class="paso-devolucion">
                    <h3>1. Buscar Usuario</h3>
                    <div class="campo-busqueda">
                        <input type="text" id="busqueda_usuario_devolver" 
                               placeholder="Buscar usuario por documento o nombre...">
                        <div id="resultados_usuario_devolver" class="resultados-busqueda"></div>
                    </div>
                </div>
                
                <!-- Paso 2: Seleccionar libros prestados (múltiples) -->
                <div id="paso_seleccionar_libro" class="paso-devolucion" style="display: none;">
                    <h3>2. Seleccionar Libros a Devolver</h3>
                    <div class="controles-seleccion">
                        <button type="button" id="btn_seleccionar_todos" class="btn-pequeño">Seleccionar Todos</button>
                        <button type="button" id="btn_deseleccionar_todos" class="btn-pequeño">Deseleccionar Todos</button>
                        <span id="contador_seleccionados" class="contador">0 libros seleccionados</span>
                    </div>
                    <div id="libros_prestados" class="libros-prestados"></div>
                </div>
                
                <!-- Formulario final de devolución múltiple -->
                <form id="form_devolver_multiple" action="{{ url_for('devolver_libros_multiples') }}" method="post" 
                      style="display: none;" class="form__prin">
                    <input type="hidden" id="ids_prestamos_devolver" name="ids_prestamos">
                    <div id="resumen_devolucion_multiple" class="resumen-devolucion"></div>
                </form>
            </div>
            
            <!-- Área de botones fija en la parte inferior -->
            <div class="devolver-botones">
                <button id="btn_confirmar_devolucion_multiple" class="Form_button" type="button" 
                        onclick="confirmarDevolucionMultiple()" style="display: none;">Confirmar Devoluciones</button>
                <button id="btn_cancelar_devolucion" type="button" class="Form_button secundario" 
                        onclick="reiniciarDevolucion()" style="display: none;">Cancelar</button>
                <a class="Link__form" href="{{ url_for('menu_prestamos') }}">Volver</a>
            </div>
        </div>
    </div>
    <script src="../static/script_prestamos_menu.js"></script>
    <script src="../static/script_prestamos_busqueda.js"></script></script>
</body>
</html>



